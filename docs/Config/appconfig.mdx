# Cloud ERP App Configuration Breakdown

This document explains the **`system.yaml` / app configuration** for the **Cloud ERP** project.  
It details how CRUD Server uses this file to manage modules, databases, logging, scripts, and reports.

---

## 1. Application Settings

```yaml
setting:
  app_id: cloud_erp
  app_code: cloud_erp
  app_version: 1.0
  app_description: A simple ERP system
  app_author: John Doe
  app_email: john.doe@example.com
  user_auth: false
  log_enabled: true
  ```

## Explanation:

- app_id / app_code: Unique identifiers for the application.
- app_version: Version of the ERP.
- app_description: Short description of the app.
- app_author / app_email: Developer or owner information.
- user_auth: Whether user authentication is enabled (false means no login required).
- log_enabled: Enable logging globally for this app.

---

```yaml
app_modules:
  accounts:
    module_id: accounts
    database_id: cloud_erp
    doc_dsl: ./config/cloud_erp/modules/accounts/documents/accounts_doc_dsl.yaml
    log:
      log_enabled: true
      log_table: logdata
      log_database_id: log_db
  product:
    module_id: product
    database_id: cloud_erp
    doc_dsl: ./config/cloud_erp/modules/product/documents/product_doc_dsl.yaml
    log:
      log_enabled: true
      log_table: logdata
      log_database_id: log_db
  sales:
    module_id: sales
    database_id: cloud_erp
    doc_dsl: ./config/cloud_erp/modules/sales/documents/sales_doc_dsl.yaml
    log:
      log_enabled: true
      log_table: logdata
      log_database_id: log_db
  payroll:
    module_id: payroll
    database_id: cloud_erp
    doc_dsl: ./config/cloud_erp/modules/payroll/documents/payroll_doc_dsl.yaml
    log:
      log_enabled: true
      log_table: logdata
      log_database_id: log_db
```


## Explanation:

- module (accounts, product, sales, payroll, stock, purchase, settings) has its own DSL defining API structure.
- module_id: Unique identifier for the module.
- database_id: Database the module uses.
- doc_dsl: Path to the Document DSL file.
- log: Module-specific logging configuration.

---

import { Mermaid } from '@mermaid-js/react';

<Mermaid chart={`
flowchart TD
    A[Client Request] --> B[CRUD Server]
    B --> C{Route to Module}

    C --> D[accounts]
    C --> E[product]
    C --> F[sales]
    C --> G[payroll]
    C --> H[stock]
    C --> I[purchase]
    C --> J[settings]

    D --> K[cloud_erp Database]
    E --> K
    F --> K
    G --> K
    H --> K
    I --> K
    J --> K

    D --> L[log_db Database]
    E --> L
    F --> L
    G --> L
    H --> L
    I --> L
    J --> L

    K --> M[Process Result]
    L --> N[Log Activity]

    M --> O[Return Response]
`} />

---

## Explanation:

- This flow shows how a client request is routed through the CRUD server to modules, databases, and logging systems.

---

```yaml
db_config:
  cloud_erp:
    database_id: cloud_erp
    type: mssql
    db_name: CLOUDERP_DEVP_V3
    conn_str: sqlserver://RPCM:password@10.190.23.7:1433?database=CLOUDERP_LIVE_V2
    purpose: app_data
    schema:
      - schema_id: accounts_schema
        schema_dsl_file: ./config/cloud_erp/modules/accounts/schema/accounts_schema.yaml
      - schema_id: product_schema
        schema_dsl_file: ./config/cloud_erp/modules/product/schema/product_schema.yaml
  log_db:
    database_id: log_db
    type: mssql
    db_name: CLOUDERP_DEVP_V3
    conn_str: sqlserver://unais:password@10.190.23.9:1433?database=CLOUDERP_DEVP_V3
    purpose: log_data
    schema:
      - schema_id: log_schema
        schema_dsl_file: ./config/cloud_erp/log/log_schema.yaml
  ```
