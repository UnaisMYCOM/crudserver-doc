# Cloud ERP App Configuration Breakdown

This document explains the **`system.yaml` / app configuration** for the **Cloud ERP** project.  
It details how CRUD Server uses this file to manage modules, databases, logging, scripts, and reports.

---

## 1. Application Settings

```yaml
setting:
  app_id: cloud_erp
  app_code: cloud_erp
  app_version: 1.0
  app_description: A simple ERP system
  app_author: John Doe
  app_email: john.doe@example.com
  user_auth: false
  log_enabled: true
  ```

## Explanation:

- app_id / app_code: Unique identifiers for the application.
- app_version: Version of the ERP.
- app_description: Short description of the app.
- app_author / app_email: Developer or owner information.
- user_auth: Whether user authentication is enabled (false means no login required).
- log_enabled: Enable logging globally for this app.

---
## 2. Application Modules
```yaml
app_modules:
  accounts:
    module_id: accounts
    database_id: cloud_erp
    doc_dsl: ./config/cloud_erp/modules/accounts/documents/accounts_doc_dsl.yaml
    log:
      log_enabled: true
      log_table: logdata
      log_database_id: log_db
  product:
    module_id: product
    database_id: cloud_erp
    doc_dsl: ./config/cloud_erp/modules/product/documents/product_doc_dsl.yaml
    log:
      log_enabled: true
      log_table: logdata
      log_database_id: log_db
  sales:
    module_id: sales
    database_id: cloud_erp
    doc_dsl: ./config/cloud_erp/modules/sales/documents/sales_doc_dsl.yaml
    log:
      log_enabled: true
      log_table: logdata
      log_database_id: log_db
  payroll:
    module_id: payroll
    database_id: cloud_erp
    doc_dsl: ./config/cloud_erp/modules/payroll/documents/payroll_doc_dsl.yaml
    log:
      log_enabled: true
      log_table: logdata
      log_database_id: log_db
```


## Explanation:

- module (accounts, product, sales, payroll, stock, purchase, settings) has its own DSL defining API structure.
- module_id: Unique identifier for the module.
- database_id: Database the module uses.
- doc_dsl: Path to the Document DSL file.
- log: Module-specific logging configuration.

---

## 3. CRUD Server Flow


![Crud Server Screenshot](/images/flowchart.png)
---

## Explanation:

- This flow shows how a client request is routed through the CRUD server to modules, databases, and logging systems.

---
## 4. Database Configuration

```yaml
db_config:
  cloud_erp:
    database_id: cloud_erp
    type: mssql
    db_name: CLOUDERP_DEVP_V3
    conn_str: sqlserver://RPCM:password@10.190.23.7:1433?database=CLOUDERP_LIVE_V2
    purpose: app_data
    schema:
      - schema_id: accounts_schema
        schema_dsl_file: ./config/cloud_erp/modules/accounts/schema/accounts_schema.yaml
      - schema_id: product_schema
        schema_dsl_file: ./config/cloud_erp/modules/product/schema/product_schema.yaml
  log_db:
    database_id: log_db
    type: mssql
    db_name: CLOUDERP_DEVP_V3
    conn_str: sqlserver://unais:password@10.190.23.9:1433?database=CLOUDERP_DEVP_V3
    purpose: log_data
    schema:
      - schema_id: log_schema
        schema_dsl_file: ./config/cloud_erp/log/log_schema.yaml
  ```
## Explanation:

- cloud_erp: Main application database.
- log_db: Separate database for logging.
- type: Database type (MSSQL).
- conn_str: Connection string.
- purpose: Role of the database (app_data vs log_data).
- schema: DSL files defining schema for each module.

## 5. Report and Process Settings

```yaml
fetch_setting_path: "./config/cloud_erp/reporting"
report_setting_path: "./config/cloud_erp/reportsys/report_settings.yaml"
standard_report_settings_id: mini_erp_report_settings
process_settings_id: mini_erp_process_settings
process_settings_path: "./config/cloud_erp/process/process_settings.yaml"
```

## Explanation:

- fetch_setting_path: Folder for report fetching configuration.
- report_setting_path: Report configuration YAML file.
- standard_report_settings_id: Default report settings ID.
- process_settings_id / process_settings_path: Background process configuration


## 6. JavaScript Script Settings

```yaml
js_script_path: "./config/cloud_erp/js_scripts"
js_script_settings: "./config/cloud_erp/js_scripts/js_script_settings.yaml"
```


## Explanation:

-js_script_path: Folder containing JS scripts for validation and processing.
-js_script_settings: YAML defining scripts to run.

## 7. Validation Settings

```yaml
validation_settings_path: "./config/cloud_erp/validations/validation_settings.yaml"
validation_settings_id: mini_erp_validation_settings
```

## Explanation:

- validation_settings_path: YAML file containing validation rules.
- validation_settings_id: Default validation configuration ID.

## 8. Summary

The application configuration serves as the backbone of the ERP system, defining **metadata, modules, databases, logging, reports, processes, scripts, and validations**.

Using this configuration, the **CRUD Server** can:

- **Automatically generate APIs** for each module  
- **Connect dynamically** to multiple databases  
- **Execute module-specific processes** seamlessly  
- **Enforce validations and logging** consistently  
- **Manage reports and background jobs** efficiently

> **Tip:** This modular approach ensures the ERP is **scalable, maintainable, and easy to extend** as the business grows.


## 9. Starting the CRUD Server

After configuration, start the server using:
```bash
crudserver.exe
```

- This initializes the CRUD server.
- It reads the system.yaml configuration.
- Once running, the server can handle client requests and route them to the configured modules.
